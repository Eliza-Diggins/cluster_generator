
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Particles &#8212; cluster_generator  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=362ab14a" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=ccbe24c1"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'particles';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Generating 3D Cluster Fields" href="fields.html" />
    <link rel="prev" title="Cluster Models" href="models.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    <p class="title logo__title">cluster_generator  documentation</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="install.html">
                        Installing cluster_generator
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="introduction.html">
                        Introduction
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="radial_profiles.html">
                        Radial Profiles
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="models.html">
                        Cluster Models
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Particles
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="fields.html">
                        Generating 3D Cluster Fields
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="initial_conditions.html">
                        Initial Conditions Generation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="codes.html">
                        Setting Up Idealized Cluster Problems in Various Codes
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="examples.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api.html">
                        API
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="install.html">
                        Installing cluster_generator
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="introduction.html">
                        Introduction
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="radial_profiles.html">
                        Radial Profiles
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="models.html">
                        Cluster Models
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Particles
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="fields.html">
                        Generating 3D Cluster Fields
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="initial_conditions.html">
                        Initial Conditions Generation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="codes.html">
                        Setting Up Idealized Cluster Problems in Various Codes
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="examples.html">
                        Examples
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api.html">
                        API
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Particles</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="particles">
<span id="id1"></span><h1>Particles<a class="headerlink" href="#particles" title="Permalink to this heading">#</a></h1>
<section id="generating-particles-from-clustermodel-objects">
<h2>Generating Particles from <code class="docutils literal notranslate"><span class="pre">ClusterModel</span></code> Objects<a class="headerlink" href="#generating-particles-from-clustermodel-objects" title="Permalink to this heading">#</a></h2>
<p>Once a <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterModel</span></code> object is created,
it can be used to generate particle positions and velocities, of gas, dark matter,
and/or star types. The positions are generated by drawing uniform random numbers
<span class="math notranslate nohighlight">\(u \in [0, 1]\)</span>, and inverting the equation <span class="math notranslate nohighlight">\(u = M(&lt;r)/M_{\rm tot}\)</span>
to find the radius <span class="math notranslate nohighlight">\(r\)</span>. Since the cluster is spherically symmetric, the
particle positions are isotropically distributed in the tangential directions
<span class="math notranslate nohighlight">\(\theta\)</span> and <span class="math notranslate nohighlight">\(\phi\)</span>. Masses are also assigned to the particles based
on the number of particles and the total mass of the gas, dark matter, or stars.</p>
<p>These fields are named <code class="docutils literal notranslate"><span class="pre">&quot;particle_position&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;particle_velocity&quot;</span></code>, and
<code class="docutils literal notranslate"><span class="pre">&quot;particle_mass&quot;</span></code>. The first two have shapes of <code class="docutils literal notranslate"><span class="pre">(number_of_particles,</span> <span class="pre">3)</span></code>
(containing all three components of each), and the latter has a shape of
<code class="docutils literal notranslate"><span class="pre">number_of_particles</span></code>.</p>
<section id="gas-particles">
<h3>Gas Particles<a class="headerlink" href="#gas-particles" title="Permalink to this heading">#</a></h3>
<p>Gas particles are initialized in hydrostatic equilibrium from the profiles. In
addition to the fields mentioned above, gas particles also have <code class="docutils literal notranslate"><span class="pre">&quot;density&quot;</span></code>,
and <code class="docutils literal notranslate"><span class="pre">&quot;thermal_energy&quot;</span></code> fields. They may optionally also have a
<code class="docutils literal notranslate"><span class="pre">&quot;magnetic_field&quot;</span></code> field, which is a vector field with shape
<code class="docutils literal notranslate"><span class="pre">(number_of_particles,</span> <span class="pre">3)</span></code>. This field is not derived from hydrostatic
equilibrium and thus needs to be set later by the user, either by hand or
from a 3D field. See <a class="reference internal" href="fields.html#map-field-to-particles"><span class="std std-ref">Mapping a Field to Particles</span></a> for details.</p>
<p>To generate gas particles, use the
If you want to add a field with the particle gravitational
potential, set <code class="docutils literal notranslate"><span class="pre">compute_potential=True</span></code>. If you want to limit the
generation of particles to within a certain radius, set <code class="docutils literal notranslate"><span class="pre">r_max</span></code> equal to
the desired radius in kpc (otherwise the maximum radius will be the value
which was originally supplied in the creation of the
<code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterModel</span></code> object):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n_gas</span> <span class="o">=</span> <span class="mi">1000000</span> <span class="c1"># number of particles to generate (now within r_max)</span>
<span class="n">r_max</span> <span class="o">=</span> <span class="mf">5000.0</span> <span class="c1"># maximum radius of particles in kpc</span>
<span class="n">gas_particles</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">generate_gas_particles</span><span class="p">(</span><span class="n">n_gas</span><span class="p">,</span> <span class="n">r_max</span><span class="o">=</span><span class="n">r_max</span><span class="p">,</span>
                                         <span class="n">compute_potential</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="dark-matter-and-star-particles">
<h3>Dark Matter and Star Particles<a class="headerlink" href="#dark-matter-and-star-particles" title="Permalink to this heading">#</a></h3>
<p>Dark matter and star particles are initialized with velocities assuming
collisionless dynamics and virial equilibrium with the underlying
gravitational potential from all mass sources.</p>
<section id="virial-equilibria-mathematical-overview">
<span id="math-overview-particles"></span><h4>Virial Equilibria: Mathematical Overview<a class="headerlink" href="#virial-equilibria-mathematical-overview" title="Permalink to this heading">#</a></h4>
<p>The mass density <span class="math notranslate nohighlight">\(\rho({\bf r})\)</span> of such a system can be derived by
integrating the phase-space distribution function <span class="math notranslate nohighlight">\(f({\bf r}, {\bf v})\)</span>
over velocity space:</p>
<div class="math notranslate nohighlight">
\[\rho({\bf r}) = \int{f({\bf r}, {\bf v})d^3{\bf v}}\]</div>
<p>where <span class="math notranslate nohighlight">\({\bf r}\)</span> and <span class="math notranslate nohighlight">\({\bf v}\)</span> are the position and velocity
vectors. Assuming spherical symmetry and isotropy, all quantities are simply
functions of the scalars <span class="math notranslate nohighlight">\(r\)</span> and <span class="math notranslate nohighlight">\(v\)</span>, and
<span class="math notranslate nohighlight">\(d^3{\bf v} = 4\pi{v^2}dv\)</span>:</p>
<div class="math notranslate nohighlight">
\[\rho(r) = 4\pi\int{f(r, v)v^2dv}\]</div>
<p>Assuming zero net angular momentum for the cluster, there is a unique
distribution function <span class="math notranslate nohighlight">\(f(E)\)</span> which corresponds to the density
<span class="math notranslate nohighlight">\(\rho(r)\)</span>. Since the total energy of a particle is
<span class="math notranslate nohighlight">\(E = v^2/2 + \Phi\)</span> (where <span class="math notranslate nohighlight">\(\Phi(r)\)</span> is the gravitational
potential) and further defining <span class="math notranslate nohighlight">\(\Psi = -\Phi\)</span> and
<span class="math notranslate nohighlight">\({\cal E} = -E = \Psi - \frac{1}{2}v^2\)</span>, we find:</p>
<div class="math notranslate nohighlight">
\[\rho(r) = 4\pi\int_0^{\Psi}f({\cal E})\sqrt{2(\Psi-{\cal E})}d{\cal E}\]</div>
<p>After differentiating this equation once with respect to <span class="math notranslate nohighlight">\(\Psi\)</span> and
inverting the resulting Abel integrel equation, we finally have:</p>
<div class="math notranslate nohighlight">
\[f({\cal E}) = \frac{1}{\sqrt{8}\pi^2}\left[\int^{\cal E}_0{d^2\rho \over d\Psi^2}{d\Psi
\over \sqrt{{\cal E} - \Psi}} + \frac{1}{\sqrt{{\cal E}}}\left({d\rho \over d\Psi}\right)_{\Psi=0} \right]\]</div>
<p>which given a density-potential pair for an equilibrium halo, can be used to
determine particle speeds. For our cluster models, this equation must (in
general) be solved numerically, even if the underlying dark matter, stellar,
and gas densities can be expressed analytically.</p>
<p>To generate the particle speeds, the distribution function <span class="math notranslate nohighlight">\(f({\cal E})\)</span>
is used with uniform random numbers <span class="math notranslate nohighlight">\(u \in [0, 1]\)</span> via an
acceptance-rejection method. The particle velocity components are isotropically
distributed in the tangential directions <span class="math notranslate nohighlight">\(\theta\)</span> and <span class="math notranslate nohighlight">\(\phi\)</span>.</p>
</section>
<section id="checking-the-virial-equilibrium">
<h4>Checking the Virial Equilibrium<a class="headerlink" href="#checking-the-virial-equilibrium" title="Permalink to this heading">#</a></h4>
<p>It is probably a good idea to check that the resulting distribution functions
for the dark matter and/or stars are consistent with the input mass density
profiles. The <code class="xref py py-meth docutils literal notranslate"><span class="pre">check_dm_virial()</span></code>
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">check_star_virial()</span></code>
methods can be used to perform a quick check on the accuracy of the virial
equilibrium model for each of these types. These methods return two NumPy
arrays, the first being the density profile computed from integrating the
distribution function, and the second being the relative difference between
the input density profile and the one calculated using this method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">rho</span><span class="p">,</span> <span class="n">diff</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">check_dm_virial</span><span class="p">()</span>
<span class="c1"># Plot this up</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">vir</span><span class="p">[</span><span class="s2">&quot;radius&quot;</span><span class="p">],</span> <span class="n">vir</span><span class="p">[</span><span class="s2">&quot;dark_matter_density&quot;</span><span class="p">],</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span>
          <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Input mass density&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">vir</span><span class="p">[</span><span class="s2">&quot;radius&quot;</span><span class="p">],</span> <span class="n">rho</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Derived mass density&quot;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;r (kpc)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;$\mathrm{</span><span class="se">\\</span><span class="s2">rho\ (M_\odot\ kpc^{-3})}$&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/check_density.png" src="_images/check_density.png" />
<p>One can see that the derived density diverges from the input density at large
radii, due to difficulties with numerically integrating to infinite radius. So long
as the maximum radius of the profile is very large, this should not matter very
much.</p>
</section>
<section id="generating-dark-matter-and-star-particles">
<h4>Generating Dark Matter and Star Particles<a class="headerlink" href="#generating-dark-matter-and-star-particles" title="Permalink to this heading">#</a></h4>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">generate_dm_particles()</span></code>
and <code class="xref py py-meth docutils literal notranslate"><span class="pre">generate_star_particles()</span></code>
methods carry out these functions for dark matter and stars respectively, and
also assigns particle masses, given the number of particles one wishes to be
generated:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n_dm</span> <span class="o">=</span> <span class="mi">1000000</span> <span class="c1"># number of DM particles to generate</span>
<span class="n">n_star</span> <span class="o">=</span> <span class="mi">10000</span> <span class="c1"># number of star particles to generate</span>
<span class="n">dm_particles</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">generate_dm_particles</span><span class="p">(</span><span class="n">n_dm</span><span class="p">)</span>
<span class="n">star_particles</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">generate_star_particles</span><span class="p">(</span><span class="n">n_star</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to add a field with the particle gravitational
potential, set <code class="docutils literal notranslate"><span class="pre">compute_potential=True</span></code>. If you want to limit the
generation of particles to within a certain radius, set <code class="docutils literal notranslate"><span class="pre">r_max</span></code> equal to
the desired radius in kpc (otherwise the maximum radius will be the value
which was originally supplied in the creation of the
<code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterModel</span></code> object):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n_dm</span> <span class="o">=</span> <span class="mi">1000000</span> <span class="c1"># number of particles to generate (now within r_max)</span>
<span class="n">r_max</span> <span class="o">=</span> <span class="mf">5000.0</span> <span class="c1"># maximum radius of particles in kpc</span>
<span class="n">dm_particles</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">generate_dm_particles</span><span class="p">(</span><span class="n">n_dm</span><span class="p">,</span> <span class="n">r_max</span><span class="o">=</span><span class="n">r_max</span><span class="p">,</span>
                                       <span class="n">compute_potential</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The object returned in any of these cases is
a <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterParticles</span></code> object,
which is covered in more detail next.</p>
</section>
</section>
</section>
<section id="the-clusterparticles-class">
<h2>The <code class="docutils literal notranslate"><span class="pre">ClusterParticles</span></code> Class<a class="headerlink" href="#the-clusterparticles-class" title="Permalink to this heading">#</a></h2>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterParticles</span></code> class is a
container for particle properties. It is the format that is returned
from the various <code class="docutils literal notranslate"><span class="pre">generate_*_particles</span></code> methods described above. This
class can be used to perform further operations on particles or write
them to disk.</p>
<section id="clusterparticles-operations">
<h3><code class="docutils literal notranslate"><span class="pre">ClusterParticles</span></code> Operations<a class="headerlink" href="#clusterparticles-operations" title="Permalink to this heading">#</a></h3>
<p>Several kinds of operations can be performed on
<code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterParticles</span></code> objects.</p>
<section id="adding-clusterparticles-objects">
<h4>Adding <code class="docutils literal notranslate"><span class="pre">ClusterParticles</span></code> Objects<a class="headerlink" href="#adding-clusterparticles-objects" title="Permalink to this heading">#</a></h4>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterParticles</span></code> objects can be added
together. In this case, we add particles of different types so that they
are combined into a single object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">all_particles</span> <span class="o">=</span> <span class="n">gas_particles</span><span class="o">+</span><span class="n">dm_particles</span><span class="o">+</span><span class="n">star_particles</span>
</pre></div>
</div>
<p>If you have multiple <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterParticles</span></code>
objects with the same particle types, the particle field arrays will simply
be concatenated together:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gas_parts</span> <span class="o">=</span> <span class="n">gas_parts1</span><span class="o">+</span><span class="n">gas_parts2</span>
</pre></div>
</div>
</section>
<section id="dropping-particle-types">
<h4>Dropping Particle Types<a class="headerlink" href="#dropping-particle-types" title="Permalink to this heading">#</a></h4>
<p>To drop all fields of a specific particle type from a
<code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterParticles</span></code> instance, use the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">drop_ptypes()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Drop gas particles</span>
<span class="n">parts</span><span class="o">.</span><span class="n">drop_ptypes</span><span class="p">(</span><span class="s2">&quot;gas&quot;</span><span class="p">)</span>

<span class="c1"># Drop DM and star particles</span>
<span class="n">parts</span><span class="o">.</span><span class="n">drop_ptypes</span><span class="p">([</span><span class="s2">&quot;dm&quot;</span><span class="p">,</span> <span class="s2">&quot;star&quot;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="add-position-and-velocity-offsets">
<h4>Add Position and Velocity Offsets<a class="headerlink" href="#add-position-and-velocity-offsets" title="Permalink to this heading">#</a></h4>
<p>By default, a <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterParticles</span></code> object is
centered at (0, 0, 0) kpc and has a bulk velocity of (0, 0, 0) kpc/Myr.
To translate the particle positions of a
<code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterParticles</span></code> instance to a new center,
or to boost the particle velocities to a new frame, or both, we can use the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">add_offsets()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># shift the particle positions by this amount in each direction</span>
<span class="n">r_ctr</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1000.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1000.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">]</span> <span class="c1"># kpc</span>
<span class="c1"># shift the particle velocities by this amount in each direction</span>
<span class="n">v_ctr</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">500.0</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span> <span class="c1"># kpc/Myr</span>
<span class="n">parts</span><span class="o">.</span><span class="n">add_offsets</span><span class="p">(</span><span class="n">r_ctr</span><span class="p">,</span> <span class="n">v_ctr</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">add_offsets()</span></code> does
exactly as it is named, it adds <em>offsets</em> to the positions and velocities,
so these are relative translations by the given amounts and not movements
to the values of the <code class="docutils literal notranslate"><span class="pre">r_ctr</span></code> and <code class="docutils literal notranslate"><span class="pre">v_ctr</span></code> parameters.</p>
</div>
</section>
<section id="make-a-cut-on-radius">
<h4>Make a Cut on Radius<a class="headerlink" href="#make-a-cut-on-radius" title="Permalink to this heading">#</a></h4>
<p>To cut out particles beyond a certain radius, use the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">make_radial_cut()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a radial cut at r_max, assuming the center is [0, 0, 0] kpc</span>
<span class="n">r_max</span> <span class="o">=</span> <span class="mf">5000.0</span> <span class="c1"># in kpc</span>
<span class="n">parts</span><span class="o">.</span><span class="n">make_radial_cut</span><span class="p">(</span><span class="n">r_max</span><span class="p">)</span>

<span class="c1"># make a radial cut at r_max, assuming the center is</span>
<span class="c1"># [500, 500, 500] kpc</span>
<span class="n">r_max</span> <span class="o">=</span> <span class="mf">5000.0</span> <span class="c1"># in kpc</span>
<span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">]</span> <span class="c1"># in kpc</span>
<span class="n">parts</span><span class="o">.</span><span class="n">make_radial_cut</span><span class="p">(</span><span class="n">r_max</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also cut out only certain particle types:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># make radial cut on stars only</span>
<span class="n">r_max</span> <span class="o">=</span> <span class="mf">5000.0</span> <span class="c1"># in kpc</span>
<span class="n">parts</span><span class="o">.</span><span class="n">make_radial_cut</span><span class="p">(</span><span class="n">r_max</span><span class="p">,</span> <span class="n">ptypes</span><span class="o">=</span><span class="s2">&quot;star&quot;</span><span class="p">)</span>

<span class="c1"># make radial cut on stars and dm</span>
<span class="n">r_max</span> <span class="o">=</span> <span class="mf">5000.0</span> <span class="c1"># in kpc</span>
<span class="n">parts</span><span class="o">.</span><span class="n">make_radial_cut</span><span class="p">(</span><span class="n">r_max</span><span class="p">,</span> <span class="n">ptypes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;star&quot;</span><span class="p">,</span><span class="s2">&quot;dm&quot;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="add-black-hole-particles">
<h4>Add Black Hole Particles<a class="headerlink" href="#add-black-hole-particles" title="Permalink to this heading">#</a></h4>
<p>To add a single black hole particle, use the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">add_black_hole()</span></code>
method. The simplest way to do this is to simply provide it with a
mass, which will place a black hole particle at [0.0, 0.0, 0.0] kpc
with zero velocity:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Mbh</span> <span class="o">=</span> <span class="mf">3.0e9</span> <span class="c1"># assumed units of Msun</span>
<span class="n">parts</span><span class="o">.</span><span class="n">add_black_hole</span><span class="p">(</span><span class="n">Mbh</span><span class="p">)</span>
</pre></div>
</div>
<p>to supply an alternate position and velocity, use <code class="docutils literal notranslate"><span class="pre">pos</span></code> and <code class="docutils literal notranslate"><span class="pre">vel</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Mbh</span> <span class="o">=</span> <span class="mf">3.0e9</span> <span class="c1"># assumed units of Msun</span>
<span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="mf">300.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">100.0</span><span class="p">]</span> <span class="c1"># assumed units of kpc</span>
<span class="n">vel</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">200.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">]</span> <span class="c1"># assumed units of kpc/Myr</span>
<span class="n">parts</span><span class="o">.</span><span class="n">add_black_hole</span><span class="p">(</span><span class="n">Mbh</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span> <span class="n">vel</span><span class="o">=</span><span class="n">vel</span><span class="p">)</span>
</pre></div>
</div>
<p>to choose the position and velocity of the DM particle with the minimum
gravitational potential, set <code class="docutils literal notranslate"><span class="pre">use_pot_min=True</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Mbh</span> <span class="o">=</span> <span class="mf">3.0e9</span> <span class="c1"># assumed units of Msun</span>
<span class="n">parts</span><span class="o">.</span><span class="n">add_black_hole</span><span class="p">(</span><span class="n">Mbh</span><span class="p">,</span> <span class="n">use_pot_min</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="add-a-new-field-or-change-a-field">
<h4>Add a New Field or Change a Field<a class="headerlink" href="#add-a-new-field-or-change-a-field" title="Permalink to this heading">#</a></h4>
<p>A new field can be added to the particles rather easily. For example, if
you wanted to add a field which added a tag to the DM particles to keep
track of which halo they originated from:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">num_particles1</span> <span class="o">=</span> <span class="mi">1_000_000</span>
<span class="n">num_particles2</span> <span class="o">=</span> <span class="mi">200_000</span>
<span class="n">halo1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">num_particles1</span><span class="p">)</span>
<span class="n">halo2</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">num_particles2</span><span class="p">)</span>
<span class="n">cluster1</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span><span class="s2">&quot;dm&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">,</span> <span class="n">halo1</span><span class="p">)</span>
<span class="n">cluster2</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span><span class="s2">&quot;dm&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">,</span> <span class="n">halo2</span><span class="p">)</span>
</pre></div>
</div>
<p>If you pick a field that already exists, it will be overwritten by default
with the new values, but you will get a warning. If you want to add the numerical
values to those of the existing field, set <code class="docutils literal notranslate"><span class="pre">add=True</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unyt</span> <span class="k">as</span> <span class="nn">u</span>

<span class="n">B0</span> <span class="o">=</span> <span class="mf">1.5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">num_particles</span><span class="p">)</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">uG</span> <span class="c1"># A constant field of 1.5 microgauss</span>
<span class="n">cluster1</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span><span class="s2">&quot;gas&quot;</span><span class="p">,</span> <span class="s2">&quot;magnetic_field_x&quot;</span><span class="p">,</span> <span class="n">B0</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>If the field you are adding is a passive scalar, set <code class="docutils literal notranslate"><span class="pre">passive_scalar=True</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unyt</span> <span class="k">as</span> <span class="nn">u</span>

<span class="n">metals</span> <span class="o">=</span> <span class="mf">0.3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">num_particles</span><span class="p">)</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">Zsun</span>
<span class="n">cluster1</span><span class="o">.</span><span class="n">set_field</span><span class="p">(</span><span class="s2">&quot;gas&quot;</span><span class="p">,</span> <span class="s2">&quot;metals&quot;</span><span class="p">,</span> <span class="n">metals</span><span class="p">,</span> <span class="n">passive_scalar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is obviously not recommended to alter a particle field created
from a radial profile or an equilibrium condition!</p>
</div>
</section>
</section>
<section id="clusterparticles-i-o">
<h3><code class="docutils literal notranslate"><span class="pre">ClusterParticles</span></code> I/O<a class="headerlink" href="#clusterparticles-i-o" title="Permalink to this heading">#</a></h3>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterParticles</span></code> objects can be written
to disk or read from a file on disk. The normal way of writing the particles
to disk is to use the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">write_particles()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># overwrite is a boolean which allows you to overwrite an existing file</span>
<span class="n">parts</span><span class="o">.</span><span class="n">write_particles</span><span class="p">(</span><span class="s2">&quot;my_particles.h5&quot;</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterParticles</span></code> object can be read
in from disk using the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">from_file()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cluster_generator</span> <span class="k">as</span> <span class="nn">cg</span>
<span class="n">new_parts</span> <span class="o">=</span> <span class="n">cg</span><span class="o">.</span><span class="n">ClusterParticles</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;my_particles.h5&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To only read in certain particle types from the file, specify them in
<code class="docutils literal notranslate"><span class="pre">ptypes</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cluster_generator</span> <span class="k">as</span> <span class="nn">cg</span>

<span class="c1"># only gas particles</span>
<span class="n">gas_only</span> <span class="o">=</span> <span class="n">cg</span><span class="o">.</span><span class="n">ClusterParticles</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;my_particles.h5&quot;</span><span class="p">,</span> <span class="n">ptypes</span><span class="o">=</span><span class="s2">&quot;gas&quot;</span><span class="p">)</span>

<span class="c1"># only dm, star particles</span>
<span class="n">dm_star</span> <span class="o">=</span> <span class="n">cg</span><span class="o">.</span><span class="n">ClusterParticles</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;my_particles.h5&quot;</span><span class="p">,</span>
                                        <span class="n">ptypes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dm&quot;</span><span class="p">,</span> <span class="s2">&quot;star&quot;</span><span class="p">])</span>
</pre></div>
</div>
<section id="gadget-like-i-o">
<h4>Gadget-Like I/O<a class="headerlink" href="#gadget-like-i-o" title="Permalink to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">cluster_generator</span></code> also provides for the creation of Gadget-like snapshot/IC
files for use with codes such as Gadget, Arepo, GIZMO, etc. The
<code class="xref py py-meth docutils literal notranslate"><span class="pre">write_to_gadget_file()</span></code>
writes an HDF5 file with the different particle types in the
<code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterParticles</span></code> object in a format
that can be used as initial conditions for these codes. It requires a
<code class="docutils literal notranslate"><span class="pre">box_size</span></code> parameter, which determines the width of the cubical box that
the initial conditions will be set within.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">box_size</span> <span class="o">=</span> <span class="mf">20000.0</span> <span class="c1"># in kpc</span>
<span class="n">parts</span><span class="o">.</span><span class="n">write_to_gadget_file</span><span class="p">(</span><span class="s2">&quot;cluster_ics.hdf5&quot;</span><span class="p">,</span> <span class="n">box_size</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>To create a new <code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterParticles</span></code> object
from one of these files, use the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">from_gadget_file()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cluster_generator</span> <span class="k">as</span> <span class="nn">cg</span>

<span class="c1"># all particle types</span>
<span class="n">parts</span> <span class="o">=</span> <span class="n">cg</span><span class="o">.</span><span class="n">ClusterParticles</span><span class="o">.</span><span class="n">from_gadget_file</span><span class="p">(</span><span class="s2">&quot;cluster_ics.hdf5&quot;</span><span class="p">)</span>

<span class="c1"># only gas particles</span>
<span class="n">gas_only</span> <span class="o">=</span> <span class="n">cg</span><span class="o">.</span><span class="n">ClusterParticles</span><span class="o">.</span><span class="n">from_gadget_file</span><span class="p">(</span><span class="s2">&quot;cluster_ics.hdf5&quot;</span><span class="p">,</span>
                                                <span class="n">ptypes</span><span class="o">=</span><span class="s2">&quot;gas&quot;</span><span class="p">)</span>

<span class="c1"># only dm, star particles</span>
<span class="n">dm_star</span> <span class="o">=</span> <span class="n">cg</span><span class="o">.</span><span class="n">ClusterParticles</span><span class="o">.</span><span class="n">from_gadget_file</span><span class="p">(</span><span class="s2">&quot;cluster_ics.hdf5&quot;</span><span class="p">,</span>
                                               <span class="n">ptypes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dm&quot;</span><span class="p">,</span> <span class="s2">&quot;star&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>For more information on how these files are used in Gadget-like codes, see
<a class="reference internal" href="codes.html#codes"><span class="std std-ref">Setting Up Idealized Cluster Problems in Various Codes</span></a>.</p>
</section>
</section>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="models.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Cluster Models</p>
      </div>
    </a>
    <a class="right-next"
       href="fields.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Generating 3D Cluster Fields</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-particles-from-clustermodel-objects">Generating Particles from <code class="docutils literal notranslate"><span class="pre">ClusterModel</span></code> Objects</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gas-particles">Gas Particles</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dark-matter-and-star-particles">Dark Matter and Star Particles</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#virial-equilibria-mathematical-overview">Virial Equilibria: Mathematical Overview</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#checking-the-virial-equilibrium">Checking the Virial Equilibrium</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-dark-matter-and-star-particles">Generating Dark Matter and Star Particles</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-clusterparticles-class">The <code class="docutils literal notranslate"><span class="pre">ClusterParticles</span></code> Class</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clusterparticles-operations"><code class="docutils literal notranslate"><span class="pre">ClusterParticles</span></code> Operations</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-clusterparticles-objects">Adding <code class="docutils literal notranslate"><span class="pre">ClusterParticles</span></code> Objects</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dropping-particle-types">Dropping Particle Types</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#add-position-and-velocity-offsets">Add Position and Velocity Offsets</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#make-a-cut-on-radius">Make a Cut on Radius</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#add-black-hole-particles">Add Black Hole Particles</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#add-a-new-field-or-change-a-field">Add a New Field or Change a Field</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clusterparticles-i-o"><code class="docutils literal notranslate"><span class="pre">ClusterParticles</span></code> I/O</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gadget-like-i-o">Gadget-Like I/O</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="_sources/particles.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
       Copyright 2020, John ZuHone.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>